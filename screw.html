<html>
  <head>
    <script src="http://github.com/rsutphin/screw-unit/raw/master/lib/jquery-1.3.2.js"></script>
    <script src="http://github.com/rsutphin/screw-unit/raw/master/lib/jquery.fn.js"></script>
    <script src="http://github.com/rsutphin/screw-unit/raw/master/lib/jquery.print.js"></script>
    <script src="http://github.com/rsutphin/screw-unit/raw/master/lib/screw.builder.js"></script>
    <script src="http://github.com/rsutphin/screw-unit/raw/master/lib/screw.matchers.js"></script>
    <script src="http://github.com/rsutphin/screw-unit/raw/master/lib/screw.events.js"></script>
    <script src="http://github.com/rsutphin/screw-unit/raw/master/lib/screw.behaviors.js"></script>
    <script src="http://github.com/drogus/smoke/raw/master/lib/smoke.core.js"></script>
    <script src="http://github.com/drogus/smoke/raw/master/lib/smoke.mock.js"></script>
    <script src="http://github.com/drogus/smoke/raw/master/lib/smoke.stub.js"></script>
    <script src="http://github.com/drogus/smoke/raw/master/lib/smoke.ajax.js"></script>
    <link rel="stylesheet" href="http://github.com/nkallen/screw-unit/raw/master/lib/screw.css">
    
    <script type="text/javascript">
      Screw.Unit(function() {
        describe("Faz um requisicao Ajax e retorna um html como sucesso", function() {
          it("mockando uma requisicao ajax", function() {
            /*
               Dizemos qual Ã© o nosso recurso no server side, depois passamos o que o recurso nos retorna
               (no nosso caso um html) e o http status code
             */
            var resultado, httpStatus;
            Smoke.Ajax.mock("/meuRecurso", "<p>Parabens!</p>", 200);
            $.ajax({
              url:"/meuRecurso",
              success: function(data, textStatus){
                resultado = data;
                httpStatus = textStatus;
                }
            });

            wait(function(){
              expect(resultado).to(equal, "<p>Parabens!</p>");
              expect(httpStatus).to(equal, "success");
            }, 50);

          });
        });
      });
    </script>
  </head>
  <body></body>
</html>

